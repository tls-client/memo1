<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ニュース情報収集ツール - オクシモロン</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <style>
        /* ツール専用スタイル */
        body {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            background-color: #0a0a0a;
            color: #ffffff;
            margin: 0;
            padding: 80px 20px 20px;
            line-height: 1.6;
        }

        .news-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .news-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .news-header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #00ff88;
        }
        
        .news-header p {
            font-size: 16px;
            color: #b0b0b0;
        }
        
        .news-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }
        
        .category-btn {
            padding: 10px 20px;
            background: #2a2a2a;
            color: #ffffff;
            border: 1px solid #333333;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'SF Mono', monospace;
            font-size: 13px;
        }
        
        .category-btn:hover {
            background: #1a1a1a;
            border-color: #00ff88;
        }
        
        .category-btn.active {
            background: #00ff88;
            color: #0a0a0a;
            border-color: #00ff88;
        }
        
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .news-card {
            background: #2a2a2a;
            border: 1px solid #333333;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .news-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
        }
        
        .news-source {
            color: #00ff88;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        
        .news-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #ffffff;
        }
        
        .news-description {
            color: #b0b0b0;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .news-time {
            color: #666666;
            font-size: 12px;
            margin-top: 10px;
        }
        
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            padding: 10px 15px;
            background: #2a2a2a;
            color: #ffffff;
            text-decoration: none;
            border-radius: 8px;
            border: 1px solid #333333;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-family: 'SF Mono', monospace;
            font-size: 13px;
            z-index: 1000;
        }
        
        .back-btn:hover {
            background: #00ff88;
            color: #0a0a0a;
            border-color: #00ff88;
        }
        
        .loading {
            text-align: center;
            padding: 60px;
            color: #b0b0b0;
        }
        
        .loading i {
            font-size: 32px;
            margin-bottom: 20px;
            color: #00ff88;
        }
        
        @media (max-width: 768px) {
            .news-grid {
                grid-template-columns: 1fr;
            }
            
            .news-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .category-btn {
                width: 200px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">
        <i class="fas fa-arrow-left"></i>
        ホームに戻る
    </a>

    <div class="news-container">
        <div class="news-header">
            <h1>ニュース情報収集ツール</h1>
            <p>最新のニュースをカテゴリー別にまとめて表示</p>
        </div>

        <div class="news-controls">
            <button class="category-btn active" data-category="all">すべて</button>
            <button class="category-btn" data-category="technology">テクノロジー</button>
            <button class="category-btn" data-category="business">ビジネス</button>
            <button class="category-btn" data-category="entertainment">エンタメ</button>
            <button class="category-btn" data-category="sports">スポーツ</button>
            <button class="category-btn" data-category="health">健康</button>
            <button class="category-btn" data-category="science">科学</button>
        </div>

        <div class="news-grid" id="newsGrid">
            <div class="loading">
                <i class="fas fa-spinner fa-spin"></i>
                <p>ニュースを読み込み中...</p>
            </div>
        </div>
    </div>

    <script>
        // ニュースAPIから最新ニュースを取得
        const API_KEY = 'demo'; // 実際はAPIキーが必要
        let currentCategory = 'all';
        
        // 初期化
        document.addEventListener('DOMContentLoaded', () => {
            loadNews('all');
            setupCategoryButtons();
        });

        // ニュース読み込み関数
        async function loadNews(category) {
            const newsGrid = document.getElementById('newsGrid');
            newsGrid.innerHTML = '<div class="loading"><i class="fas fa-spinner fa-spin"></i><p>ニュースを読み込み中...</p></div>';
            
            try {
                // 複数のニュースソースから取得
                const newsSources = [
                    fetchTechNews(category),
                    fetchBusinessNews(category),
                    fetchGeneralNews(category)
                ];
                
                const results = await Promise.allSettled(newsSources);
                const allNews = results
                    .filter(result => result.status === 'fulfilled')
                    .flatMap(result => result.value);
                
                // 重複を除去してランダムに並び替え
                const uniqueNews = Array.from(new Map(allNews.map(news => [news.title, news])).values());
                const shuffledNews = uniqueNews.sort(() => Math.random() - 0.5);
                
                renderNews(shuffledNews, category);
            } catch (error) {
                console.error('ニュース読み込みエラー:', error);
                renderFallbackNews(category);
            }
        }

        // テクノロジーニュース取得
        async function fetchTechNews(category) {
            // GitHubトピックから最新情報を取得
            const topics = ['javascript', 'react', 'python', 'ai', 'machine-learning'];
            const news = [];
            
            for (const topic of topics) {
                try {
                    const response = await fetch(`https://api.github.com/search/repositories?q=${topic}&sort=updated&order=desc&per_page=5`);
                    const data = await response.json();
                    
                    data.items.forEach((repo, index) => {
                        news.push({
                            id: `tech-${topic}-${index}`,
                            title: `${repo.name}: ${repo.description || '最新の更新'}`,
                            description: repo.description || `${repo.name}の最新情報。スター数: ${repo.stargazers_count}`,
                            source: 'GitHub',
                            category: 'technology',
                            date: new Date(repo.updated_at).toISOString().split('T')[0],
                            url: repo.html_url,
                            image: `https://picsum.photos/seed/${repo.name}/400/200`
                        });
                    });
                } catch (error) {
                    console.log('GitHub APIエラー、代替データを使用');
                }
            }
            
            return news;
        }

        // ビジネスニュース取得
        async function fetchBusinessNews(category) {
            // JSONPlaceholderからダミービジネスニュースを生成
            const businessNews = [
                {
                    id: 'biz-1',
                    title: 'スタートアップ投資が活発化、AI分野が中心',
                    description: '2024年、AI関連スタートアップへの投資が前年比40%増加。特に生成AI分野が人気。',
                    source: 'Business Daily',
                    category: 'business',
                    date: new Date().toISOString().split('T')[0],
                    url: '#',
                    image: 'https://picsum.photos/seed/business-ai/400/200'
                },
                {
                    id: 'biz-2',
                    title: 'テック企業の決算発表、好調な業績続く',
                    description: '主要テック企業の四半期決算が発表。クラウドサービスとAI事業が牽引。',
                    source: 'Tech Finance',
                    category: 'business',
                    date: new Date(Date.now() - 86400000).toISOString().split('T')[0],
                    url: '#',
                    image: 'https://picsum.photos/seed/tech-earnings/400/200'
                }
            ];
            
            return businessNews;
        }

        // 一般ニュース取得
        async function fetchGeneralNews(category) {
            const categories = ['entertainment', 'sports', 'health', 'science'];
            const news = [];
            
            categories.forEach(cat => {
                for (let i = 0; i < 3; i++) {
                    news.push({
                        id: `${cat}-${i}`,
                        title: `${getCategoryName(cat)}関連の最新トピックス`,
                        description: `${getCategoryName(cat)}分野での最新動向と注目すべきポイントについて詳しく解説。`,
                        source: 'News Hub',
                        category: cat,
                        date: new Date(Date.now() - (i * 86400000)).toISOString().split('T')[0],
                        url: '#',
                        image: `https://picsum.photos/seed/${cat}-${i}/400/200`
                    });
                }
            });
            
            return news;
        }

        // フォールバックニュース
        function renderFallbackNews(category) {
            const fallbackNews = [
                {
                    id: 'fallback-1',
                    title: '最新テクノロジートレンド',
                    description: 'AI、量子コンピューティング、ブロックチェーンなど最新技術の動向を解説。',
                    source: 'Tech Update',
                    category: 'technology',
                    date: new Date().toISOString().split('T')[0],
                    url: '#',
                    image: 'https://picsum.photos/seed/tech-trends/400/200'
                },
                {
                    id: 'fallback-2',
                    title: '市場動向分析',
                    description: '最新の市場データと投資トレンドを分析。専門家による詳細なレポート。',
                    source: 'Market Analysis',
                    category: 'business',
                    date: new Date().toISOString().split('T')[0],
                    url: '#',
                    image: 'https://picsum.photos/seed/market-data/400/200'
                }
            ];
            
            renderNews(fallbackNews, category);
        }

        // カテゴリーボタンの設定
        function setupCategoryButtons() {
            const buttons = document.querySelectorAll('.category-btn');
            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    buttons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentCategory = btn.dataset.category;
                    loadNews(currentCategory);
                });
            });
        }

        // ニュースのレンダリング
        function renderNews(newsData, category) {
            const newsGrid = document.getElementById('newsGrid');
            
            // フィルタリング
            const filteredNews = category === 'all' 
                ? newsData 
                : newsData.filter(news => news.category === category);

            if (filteredNews.length === 0) {
                newsGrid.innerHTML = `
                    <div class="error">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>このカテゴリーのニュースが見つかりません</p>
                    </div>
                `;
                return;
            }

            newsGrid.innerHTML = filteredNews.map(news => `
                <article class="news-card" onclick="openNews('${news.url}', '${news.title}')">
                    <img src="${news.image}" alt="${news.title}" class="news-image" onerror="this.src='https://picsum.photos/seed/default/400/200'">
                    <div class="news-content">
                        <div class="news-source">${news.source}</div>
                        <h3 class="news-title">${news.title}</h3>
                        <p class="news-description">${news.description}</p>
                        <div class="news-meta">
                            <span class="news-date">${formatDate(news.date)}</span>
                            <span class="news-category">${getCategoryName(news.category)}</span>
                        </div>
                    </div>
                </article>
            `).join('');
        }

        // ニュースを開く
        function openNews(url, title) {
            if (url === '#') {
                // モーダルで詳細表示
                showModal(title);
            } else {
                window.open(url, '_blank');
            }
        }

        // モーダル表示
        function showModal(title) {
            const modal = document.createElement('div');
            modal.className = 'news-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${title}</h3>
                        <button class="modal-close" onclick="closeModal(this)">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>これはデモニュースです。実際のニュースサイトでは詳細な記事内容が表示されます。</p>
                        <p>最新の情報については、公式ニュースサイトをご確認ください。</p>
                        <div class="modal-actions">
                            <button class="control-btn" onclick="closeModal(this)">閉じる</button>
                            <button class="control-btn secondary" onclick="window.open('https://news.google.com', '_blank')">Google Newsで見る</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
            modal.style.display = 'flex';
        }

        // モーダルを閉じる
        function closeModal(element) {
            const modal = element.closest('.news-modal');
            if (modal) {
                modal.remove();
            }
        }

        // 日付のフォーマット
        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const today = new Date();
            const diffTime = Math.abs(today - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 0) return '今日';
            if (diffDays === 1) return '昨日';
            if (diffDays < 7) return `${diffDays}日前`;
            
            return date.toLocaleDateString('ja-JP');
        }

        // カテゴリー名の取得
        function getCategoryName(category) {
            const names = {
                technology: 'テクノロジー',
                business: 'ビジネス',
                entertainment: 'エンタメ',
                sports: 'スポーツ',
                health: '健康',
                science: '科学'
            };
            return names[category] || category;
        }

        // 自動更新（5分ごと）
        setInterval(() => {
            loadNews(currentCategory);
        }, 300000);

        // テーマ切り替え
        const savedTheme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', savedTheme);
    </script>

    <!-- モーダルスタイル -->
    <style>
        .news-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .modal-content {
            background: #2a2a2a;
            border: 1px solid #333333;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #333333;
        }

        .modal-header h3 {
            color: #00ff88;
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }

        .modal-close:hover {
            color: #ff6b6b;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            justify-content: flex-end;
        }

        .news-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .news-content {
            flex: 1;
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 12px;
        }

        .news-date {
            color: #666666;
        }

        .news-category {
            background: #00ff88;
            color: #0a0a0a;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .control-btn {
            padding: 8px 16px;
            background: #00ff88;
            color: #0a0a0a;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'SF Mono', monospace;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background: #00cc66;
        }

        .control-btn.secondary {
            background: transparent;
            color: #00ff88;
            border: 1px solid #00ff88;
        }

        .control-btn.secondary:hover {
            background: #00ff88;
            color: #0a0a0a;
        }
    </style>
</body>
</html>
